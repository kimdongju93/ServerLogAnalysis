# Server Log Analysis & Real-Time Dashboard

## 프로젝트 개요
- **서버 로그를 실시간으로 분석**하고, **웹 대시보드**로 시각화하는 Python 기반 시스템입니다.
- Flask, pandas, Chart.js, threading, logging, LLM 프롬프트 활용 등 다양한 기술을 통합.
- 실시간 로그 생성, 5초마다 자동 분석, 대시보드 자동 새로고침, 인사이트/개선 제안/AI 활용 프롬프트 자동 리포트화.

## 주요 기능
- **실시간 로그 생성**: 샘플 로그가 자동으로 생성/추가됨
- **5초마다 자동 분석**: 로그가 추가될 때마다 5초 주기로 분석 및 리포트 자동 갱신
- **대시보드**: Flask 기반 웹 UI, Chart.js로 실시간 그래프, 통계, 리포트 제공
- **분석 리포트**: [개선 제안 및 인사이트], [LLM 활용 자연어 요약/이상탐지 프롬프트 샘플]만 간결하게 자동 저장
- **AI(LLM) 활용**: ChatGPT 등 생성형 AI에 바로 입력할 수 있는 프롬프트 자동 생성 및 리포트 하단에 포함
- **에러/성능 로깅**: logs/ 디렉토리에 각 프로세스별 상세 로그 기록

## 디렉토리 구조
```
ServerLogAnalysis/
├── README.md
├── requirements.txt
├── run_dashboard.py         # 통합 실행(로그 생성+분석+서버)
├── generate_fresh_logs.py   # 샘플 로그 생성
├── log_analysis.py          # 로그 분석 및 리포트 생성
├── app.py                   # Flask 웹 서버
├── templates/
│   └── dashboard.html       # 대시보드 UI
├── logs/                    # 각종 실행/에러 로그
├── server_sample.log        # 실시간 로그 파일
├── analysis_report.txt      # 실시간 분석 리포트(자동 생성)
└── prompt_log.md            # (선택) 주요 LLM 프롬프트 정리
```

## AI(LLM) 활용 내역
- **분석 리포트 자동화**: 분석 결과를 요약/인사이트/개선 제안 형태로 자동 생성
- **LLM 프롬프트 자동 포함**: ChatGPT 등 LLM에 바로 입력할 수 있는 자연어 요약/이상탐지/대시보드 설명 프롬프트 자동 생성
- **prompt_log.md**: 주요 프롬프트 예시/구조 정리 파일(선택)

### 리포트 예시
```
[개선 제안 및 인사이트]
---
- 가장 느린 엔드포인트: /api/admin/stats (평균 755ms, p90 1119ms)
  → DB 인덱스 추가, 캐싱, 쿼리 최적화, 비동기화 등을 고려하세요.
- 4xx/5xx 에러 집중 엔드포인트: ...
  → 입력값 검증, 예외처리, 인증 강화 등 필요
- 트래픽 피크 시간대: 6시 (3636건)
- 평균 응답시간이 가장 높은 시간대: 18시, 평균 248ms

[LLM 활용 자연어 요약/이상탐지 프롬프트 샘플]
---
1. 리포트 자연어 요약 프롬프트:
다음은 서버 로그 분석 결과 요약입니다.
---
{stats_summary}
---
위 데이터를 바탕으로, 주요 문제점, 이상 징후, 개선 제안, 트래픽 특징을 관리자에게 보고하는 자연어 리포트를 작성해줘.

2. 이상 패턴 탐지 프롬프트:
아래는 최근 서버 로그 일부입니다.
---
로그 일부 샘플...
---
이 로그에서 평소와 다른 점, 이상 징후, 에러 집중 구간, 응답시간 급증 등 특이사항을 찾아서 요약해줘.

3. 대시보드 자연어 설명 프롬프트:
아래는 대시보드 주요 통계입니다.
---
{stats_summary}
---
이 데이터를 바탕으로, 트래픽/에러/응답시간의 특징을 한눈에 알 수 있게 자연어로 설명해줘.
```

## 실행 방법
1. `pip install -r requirements.txt`
2. `python run_dashboard.py` 실행 (로그 생성+분석+서버 자동)
3. 브라우저에서 `http://127.0.0.1:5000/` 접속

## 제출 시 포함 파일
- README.md (본 파일)
- ServerLogAnalysis/ (소스코드)
- prompt_log.md (선택)

# 서버 로그 분석 대시보드

실시간 서버 로그 분석 및 웹 대시보드 프로젝트입니다.

## 🚀 빠른 시작

### 방법 1: 통합 실행 (권장)
```bash
# Windows
start_dashboard.bat

# 또는 Python 직접 실행
python ServerLogAnalysis/run_dashboard.py
```

### 방법 2: 개별 실행
```bash
# 1. 로그 자동 생성 (새 터미널)
python ServerLogAnalysis/generate_fresh_logs.py

# 2. Flask 웹 서버 (새 터미널)
python ServerLogAnalysis/app.py
```

## 📊 기능

### 실시간 대시보드
- **요약 카드**: 총 요청 수, 평균 응답시간, 성공률, 에러율
- **그래프**: 시간별 요청 건수, 상태 코드 분포, 엔드포인트별 통계
- **리포트**: 실시간 분석 리포트
- **테이블**: 느린 요청, 최근 요청 목록

### 자동화 기능
- **로그 생성**: 3초마다 새로운 로그 자동 추가
- **실시간 분석**: 5초마다 로그 분석 및 그래프 갱신
- **웹 대시보드**: 모든 데이터 실시간 업데이트

## 📁 프로젝트 전체 구조 및 파일 설명

```
ServerLogAnalysis/
├── server_sample.log              # 실제 분석 대상 서버 로그 파일 (자동 생성/갱신)
├── start_dashboard.bat            # 윈도우용 통합 실행 배치 파일
├── ServerLogAnalysis/
│   ├── app.py                     # Flask 웹 서버 및 API 엔드포인트
│   ├── generate_fresh_logs.py     # 로그 초기화 및 새 로그 생성
│   ├── log_analysis.py            # 로그 분석 및 리포트 생성
│   ├── run_dashboard.py           # 통합 실행 스크립트 (로그 생성+분석+웹서버)
│   ├── requirements.txt           # 필수 패키지 목록
│   ├── README.md                  # 프로젝트 설명서
│   ├── logs/                      # 로그 파일 저장 디렉토리 (자동 생성)
│   │   ├── flask_app.log          # Flask 앱 로그
│   │   ├── log_analysis.log       # 로그 분석 스크립트 로그
│   │   ├── log_generator.log      # 로그 생성 스크립트 로그
│   │   └── dashboard_runner.log   # 통합 실행 스크립트 로그
│   ├── templates/
│   │   └── dashboard.html         # 웹 대시보드 HTML 템플릿
│   └── analysis_report.txt        # 로그 분석 결과 리포트 (자동 생성)
```

## 🔍 로깅 시스템

### 로그 파일 위치
모든 로그 파일은 `ServerLogAnalysis/logs/` 디렉토리에 저장됩니다:

- **`flask_app.log`**: Flask 웹 서버의 모든 API 요청, 오류, 디버그 정보
- **`log_analysis.log`**: 로그 분석 스크립트의 실행 과정, 분석 결과, 오류 정보
- **`log_generator.log`**: 로그 생성 스크립트의 실행 과정, 생성된 로그 정보
- **`dashboard_runner.log`**: 통합 실행 스크립트의 프로세스 관리, 오류 정보

### 로그 레벨
- **INFO**: 정상적인 실행 과정 정보
- **WARNING**: 주의가 필요한 상황 (데이터 없음, 파일 누락 등)
- **ERROR**: 오류 발생 시 상세한 오류 정보와 스택 트레이스
- **DEBUG**: 상세한 디버그 정보 (로그 생성 시 각 로그 라인 정보)

### 오류 추적
모든 오류는 다음 정보와 함께 기록됩니다:
- 발생 시간
- 오류 메시지
- 상세한 스택 트레이스
- 관련된 파일 경로나 데이터 정보

## 🌐 접속 방법

웹 브라우저에서 다음 주소로 접속:
- **http://127.0.0.1:5000/**
- 또는 **http://localhost:5000/**

## 🔧 설치 및 설정

### 1. Python 패키지 설치
```bash
pip install -r ServerLogAnalysis/requirements.txt
```

### 2. 한글 폰트 설정 (Windows)
그래프에서 한글이 깨지는 경우:
```python
# matplotlib 한글 폰트 설정
import matplotlib.pyplot as plt
plt.rcParams['font.family'] = 'Malgun Gothic'
```

## ⚡ 실행 옵션

### 통합 실행 (권장)
- 모든 기능이 자동으로 시작됩니다
- 로그 생성, 분석, 웹 서버가 동시에 실행됩니다
- 모든 프로세스의 로그가 자동으로 기록됩니다

### 개별 실행
- 각 기능을 별도 터미널에서 실행할 수 있습니다
- 디버깅이나 특정 기능만 테스트할 때 유용합니다
- 각 스크립트별로 독립적인 로그 파일이 생성됩니다

## 🛠️ 문제 해결

### 웹페이지가 열리지 않는 경우
1. Flask 서버가 실행 중인지 확인
2. 포트 5000이 사용 중인지 확인
3. 브라우저 캐시 삭제 후 새로고침
4. `logs/flask_app.log` 파일에서 오류 확인

### 그래프가 표시되지 않는 경우
1. static 폴더에 그래프 파일이 생성되었는지 확인
2. 한글 폰트 설정 확인
3. 로그 분석 스크립트가 정상 실행되었는지 확인
4. `logs/log_analysis.log` 파일에서 분석 오류 확인

### 로그 파일 오류
1. server_sample.log 파일이 존재하는지 확인
2. 파일 권한 확인
3. 디스크 공간 확인
4. `logs/log_generator.log` 파일에서 생성 오류 확인

### 통합 실행 오류
1. `logs/dashboard_runner.log` 파일에서 전체 실행 과정 확인
2. 필수 파일들이 모두 존재하는지 확인
3. Python 환경 및 패키지 설치 상태 확인

## 📈 성능 최적화

### 대용량 로그 처리
- 로그 파일 크기가 100MB 이상인 경우 분석 시간이 증가할 수 있습니다
- 주기적으로 오래된 로그를 아카이브하는 것을 권장합니다
- 로그 분석 스크립트의 메모리 사용량을 모니터링하세요

### 메모리 사용량
- 실시간 분석으로 인한 메모리 사용량을 모니터링하세요
- 필요시 분석 주기를 조정할 수 있습니다
- 로그 파일 크기가 지속적으로 증가하는 경우 로그 로테이션을 고려하세요

## 🔄 업데이트 및 개선

### 추가 가능한 기능
- 데이터베이스 연동 (SQLite, PostgreSQL)
- 알림 시스템 (이메일, Slack)
- 사용자 인증 및 권한 관리
- API 엔드포인트 확장
- 모바일 반응형 디자인 개선
- 로그 압축 및 아카이빙
- 로그 분석 결과 캐싱

### 성능 개선
- 캐싱 시스템 도입
- 비동기 처리 최적화
- 데이터 압축 및 아카이빙
- 로그 파일 로테이션
- 메모리 사용량 최적화

## 📝 라이선스

이 프로젝트는 교육 및 개발 목적으로 제작되었습니다.

## 🤝 기여

버그 리포트나 기능 제안은 언제든 환영합니다! 